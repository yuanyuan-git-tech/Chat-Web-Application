{"ast":null,"code":"var _jsxFileName = \"/Users/yuanyuanzhao/InterviewProject/Nimble-FullStack/react-typescript/src/WebsocketClient.tsx\",\n  _s = $RefreshSig$();\n// src/components/WebsocketClient.tsx\nimport React, { useEffect, useState } from 'react';\nimport Cookies from \"universal-cookie\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WebsocketClient = () => {\n  _s();\n  const [ws, setWs] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [content, setContent] = useState('');\n  const cookies = new Cookies();\n  useEffect(() => {\n    const websocket = new WebSocket('wss://localhost:8000/message');\n    websocket.onopen = () => {\n      console.log('WebSocket Connected');\n    };\n    websocket.onmessage = event => {\n      const message = JSON.parse(event.data);\n      setMessages(prevMessages => [...prevMessages, message]);\n    };\n    websocket.onclose = () => console.log('WebSocket Disconnected');\n    setWs(websocket);\n    return () => {\n      websocket.close();\n    };\n  }, []);\n  const sendMessage = () => {\n    if (ws) {\n      ws.send(JSON.stringify({\n        username: cookies.get('user'),\n        content: content\n      }));\n      setContent('');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      value: content,\n      onChange: e => setContent(e.target.value),\n      placeholder: \"Type a message...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: sendMessage,\n      children: \"Send\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [msg.username, \": \", msg.content]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 9\n  }, this);\n};\n_s(WebsocketClient, \"r3V8hS5UhRa4o99N/KDfBnNCugc=\");\n_c = WebsocketClient;\nexport default WebsocketClient;\nvar _c;\n$RefreshReg$(_c, \"WebsocketClient\");","map":{"version":3,"names":["React","useEffect","useState","Cookies","jsxDEV","_jsxDEV","WebsocketClient","_s","ws","setWs","messages","setMessages","content","setContent","cookies","websocket","WebSocket","onopen","console","log","onmessage","event","message","JSON","parse","data","prevMessages","onclose","close","sendMessage","send","stringify","username","get","children","value","onChange","e","target","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","msg","index","_c","$RefreshReg$"],"sources":["/Users/yuanyuanzhao/InterviewProject/Nimble-FullStack/react-typescript/src/WebsocketClient.tsx"],"sourcesContent":["// src/components/WebsocketClient.tsx\nimport React, { useEffect, useState } from 'react';\nimport Cookies from \"universal-cookie\";\n\ninterface Message {\n    username: string;\n    content: string;\n}\n\nconst WebsocketClient: React.FC = () => {\n    const [ws, setWs] = useState<WebSocket | null>(null);\n    const [messages, setMessages] = useState<Message[]>([]);\n    const [content, setContent] = useState('');\n    const cookies = new Cookies();\n\n    useEffect(() => {\n        const websocket = new WebSocket('wss://localhost:8000/message');\n\n        websocket.onopen = () => {\n            console.log('WebSocket Connected');\n        };\n\n        websocket.onmessage = (event) => {\n            const message: Message = JSON.parse(event.data);\n            setMessages((prevMessages) => [...prevMessages, message]);\n        };\n\n        websocket.onclose = () => console.log('WebSocket Disconnected');\n\n        setWs(websocket);\n\n        return () => {\n            websocket.close();\n        };\n    }, []);\n\n    const sendMessage = () => {\n        if (ws) {\n            ws.send(JSON.stringify({ username: cookies.get('user'), content: content }));\n            setContent('');\n        }\n    };\n\n    return (\n        <div>\n            <input\n                value={content}\n                onChange={(e) => setContent(e.target.value)}\n                placeholder=\"Type a message...\"\n            />\n            <button onClick={sendMessage}>Send</button>\n            <ul>\n                {messages.map((msg, index) => (\n                    <li key={index}>{msg.username}: {msg.content}</li>\n                ))}\n            </ul>\n        </div>\n    );\n};\n\nexport default WebsocketClient;\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,OAAO,MAAM,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAOvC,MAAMC,eAAyB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACpC,MAAM,CAACC,EAAE,EAAEC,KAAK,CAAC,GAAGP,QAAQ,CAAmB,IAAI,CAAC;EACpD,MAAM,CAACQ,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAY,EAAE,CAAC;EACvD,MAAM,CAACU,OAAO,EAAEC,UAAU,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAMY,OAAO,GAAG,IAAIX,OAAO,CAAC,CAAC;EAE7BF,SAAS,CAAC,MAAM;IACZ,MAAMc,SAAS,GAAG,IAAIC,SAAS,CAAC,8BAA8B,CAAC;IAE/DD,SAAS,CAACE,MAAM,GAAG,MAAM;MACrBC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;IACtC,CAAC;IAEDJ,SAAS,CAACK,SAAS,GAAIC,KAAK,IAAK;MAC7B,MAAMC,OAAgB,GAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACI,IAAI,CAAC;MAC/Cd,WAAW,CAAEe,YAAY,IAAK,CAAC,GAAGA,YAAY,EAAEJ,OAAO,CAAC,CAAC;IAC7D,CAAC;IAEDP,SAAS,CAACY,OAAO,GAAG,MAAMT,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;IAE/DV,KAAK,CAACM,SAAS,CAAC;IAEhB,OAAO,MAAM;MACTA,SAAS,CAACa,KAAK,CAAC,CAAC;IACrB,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,WAAW,GAAGA,CAAA,KAAM;IACtB,IAAIrB,EAAE,EAAE;MACJA,EAAE,CAACsB,IAAI,CAACP,IAAI,CAACQ,SAAS,CAAC;QAAEC,QAAQ,EAAElB,OAAO,CAACmB,GAAG,CAAC,MAAM,CAAC;QAAErB,OAAO,EAAEA;MAAQ,CAAC,CAAC,CAAC;MAC5EC,UAAU,CAAC,EAAE,CAAC;IAClB;EACJ,CAAC;EAED,oBACIR,OAAA;IAAA6B,QAAA,gBACI7B,OAAA;MACI8B,KAAK,EAAEvB,OAAQ;MACfwB,QAAQ,EAAGC,CAAC,IAAKxB,UAAU,CAACwB,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;MAC5CI,WAAW,EAAC;IAAmB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClC,CAAC,eACFtC,OAAA;MAAQuC,OAAO,EAAEf,WAAY;MAAAK,QAAA,EAAC;IAAI;MAAAM,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,eAC3CtC,OAAA;MAAA6B,QAAA,EACKxB,QAAQ,CAACmC,GAAG,CAAC,CAACC,GAAG,EAAEC,KAAK,kBACrB1C,OAAA;QAAA6B,QAAA,GAAiBY,GAAG,CAACd,QAAQ,EAAC,IAAE,EAACc,GAAG,CAAClC,OAAO;MAAA,GAAnCmC,KAAK;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAmC,CACpD;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACJ,CAAC;AAEd,CAAC;AAACpC,EAAA,CAjDID,eAAyB;AAAA0C,EAAA,GAAzB1C,eAAyB;AAmD/B,eAAeA,eAAe;AAAC,IAAA0C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}